<!doctype html><html lang=pt-br><head><title>¬∑ nivaldogmelo
</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=color-scheme content="light dark"><meta name=author content="Nivaldo Melo"><meta name=description content='<?xml version="1.0" encoding="UTF-8" ?> <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"> structuring-terraform.pt-br.html +++ author = &#8220;nivaldo melo&#8221; title = &#8220;Estruturando seu Terraform&#8221; date = &#8220;2024&#8211;08&#8211;07&#8221; description = &#8220;Um guia para como estruturar o terraform dentro do seu time&#8221; tags = [ &#8220;golang&#8221;, &#8220;terraform&#8221;, ] +++
Estruturando seu Terraform (Em constru√ß√£o) Como sabemos o Terraform √© uma das ferramentas mais populares quando se trata de IAC declarativa, por√©m algo que sem pre me deixou um pouco perdido foi como estruturar meus projetos.'><meta name=keywords content="blog,desenvolvedor,pessoal"><meta name=twitter:card content="summary"><meta name=twitter:title content="nivaldogmelo"><meta name=twitter:description content='<?xml version="1.0" encoding="UTF-8" ?> <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"> structuring-terraform.pt-br.html +++ author = ‚Äúnivaldo melo‚Äù title = ‚ÄúEstruturando seu Terraform‚Äù date = ‚Äú2024‚Äì08‚Äì07‚Äù description = ‚ÄúUm guia para como estruturar o terraform dentro do seu time‚Äù tags = [ ‚Äúgolang‚Äù, ‚Äúterraform‚Äù, ] +++ Estruturando seu Terraform (Em constru√ß√£o) Como sabemos o Terraform √© uma das ferramentas mais populares quando se trata de IAC declarativa, por√©m algo que sem pre me deixou um pouco perdido foi como estruturar meus projetos.'><meta property="og:url" content="https://nivaldogmelo.github.io/pt-br/posts/structuring-terraform/"><meta property="og:site_name" content="nivaldogmelo"><meta property="og:title" content="nivaldogmelo"><meta property="og:description" content='<?xml version="1.0" encoding="UTF-8" ?> <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"> structuring-terraform.pt-br.html +++ author = ‚Äúnivaldo melo‚Äù title = ‚ÄúEstruturando seu Terraform‚Äù date = ‚Äú2024‚Äì08‚Äì07‚Äù description = ‚ÄúUm guia para como estruturar o terraform dentro do seu time‚Äù tags = [ ‚Äúgolang‚Äù, ‚Äúterraform‚Äù, ] +++ Estruturando seu Terraform (Em constru√ß√£o) Como sabemos o Terraform √© uma das ferramentas mais populares quando se trata de IAC declarativa, por√©m algo que sem pre me deixou um pouco perdido foi como estruturar meus projetos.'><meta property="og:locale" content="pt_br"><meta property="og:type" content="article"><meta property="article:section" content="posts"><link rel=canonical href=https://nivaldogmelo.github.io/pt-br/posts/structuring-terraform/><link rel=preload href=/fonts/fa-brands-400.woff2 as=font type=font/woff2 crossorigin><link rel=preload href=/fonts/fa-regular-400.woff2 as=font type=font/woff2 crossorigin><link rel=preload href=/fonts/fa-solid-900.woff2 as=font type=font/woff2 crossorigin><link rel=stylesheet href=/css/coder.min.36f76aaf39a14ecf5c3a3c6250dcaf06c238b3d8365d17d646f95cb1874e852b.css integrity="sha256-NvdqrzmhTs9cOjxiUNyvBsI4s9g2XRfWRvlcsYdOhSs=" crossorigin=anonymous media=screen><link rel=stylesheet href=/css/coder-dark.min.593028e7f7ac55c003b79c230d1cd411bb4ca53b31556c3abb7f027170e646e9.css integrity="sha256-WTAo5/esVcADt5wjDRzUEbtMpTsxVWw6u38CcXDmRuk=" crossorigin=anonymous media=screen><link rel=stylesheet href=/css/custom.min.e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855.css integrity="sha256-47DEQpj8HBSa+/TImW+5JCeuQeRkm5NMpJWZG3hSuFU=" crossorigin=anonymous media=screen><link rel=icon type=image/svg+xml href=/images/favicon.svg sizes=any><link rel=icon type=image/png href=/img/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/img/favicon-16x16.png sizes=16x16><link rel=apple-touch-icon href=/images/apple-touch-icon.png><link rel=apple-touch-icon sizes=180x180 href=/images/apple-touch-icon.png><link rel=manifest href=/site.webmanifest><link rel=mask-icon href=/images/safari-pinned-tab.svg color=#5bbad5></head><body class="preload-transitions colorscheme-auto"><div class=float-container><a id=dark-mode-toggle class=colorscheme-toggle><i class="fa-solid fa-adjust fa-fw" aria-hidden=true></i></a></div><main class=wrapper><nav class=navigation><section class=container><a class=navigation-title href=https://nivaldogmelo.github.io/pt-br/>nivaldogmelo
</a><input type=checkbox id=menu-toggle>
<label class="menu-button float-right" for=menu-toggle><i class="fa-solid fa-bars fa-fw" aria-hidden=true></i></label><ul class=navigation-list><li class=navigation-item><a class=navigation-link href=/pt-br/about/>Sobre</a></li><li class=navigation-item><a class=navigation-link href=/pt-br/posts/>Blog</a></li><li class="navigation-item menu-separator"><span>|</span></li><li class=navigation-item><a href=/>üá¨üáß</a></li></ul></section></nav><div class=content><section class="container post"><article><header><div class=post-title><h1 class=title><a class=title-link href=https://nivaldogmelo.github.io/pt-br/posts/structuring-terraform/></a></h1></div><div class=post-meta><div class=date><span class=posted-on><i class="fa-solid fa-calendar" aria-hidden=true></i>
<time datetime=0001-01-01T00:00:00Z>janeiro 1, 0001
</time></span><span class=reading-time><i class="fa-solid fa-clock" aria-hidden=true></i>
9 minutos de leitura</span></div></div></header><div class=post-content><!doctype html><html xmlns=http://www.w3.org/1999/xhtml><head><title>structuring-terraform.pt-br.html</title>
<meta charset=utf-8></head><body><p>+++
author = &#8220;nivaldo melo&#8221;
title = &#8220;Estruturando seu Terraform&#8221;
date = &#8220;2024&#8211;08&#8211;07&#8221;
description = &#8220;Um guia para como estruturar o terraform dentro do seu time&#8221;
tags = [ &#8220;golang&#8221;, &#8220;terraform&#8221;, ]
+++</p><h2 id=estruturandoseuterraformemconstru√ß√£o>Estruturando seu Terraform (Em constru√ß√£o)</h2><p>Como sabemos o Terraform √© uma das ferramentas mais populares quando se trata de IAC declarativa, por√©m algo que sem pre me deixou um pouco perdido foi como estruturar meus projetos. N√£o √© dif√≠cil acharmos um tutorial de boas pr√°ticas de como devemos nomear, por√©m sempre fiquei um pouco perdido em quest√£o de organiza√ß√£o. Devo usar m√≥dulos? Workspaces? At√© onde devo agregar os recursos em um √∫nico arquivo <code>.tf</code>?</p><p>A partir disso escrevi um modelo de estrutura para o c√≥digo terraform, que engloba funcionalidades que na minha opini√£o s√£o essenciais em um projeto. Esse modelo √© composto por tr√™s pilares:</p><ul><li><strong>M√≥dulos</strong>: Utilizados para agregar servi√ßos que funcionam como uma unidade (Mais detalhes a frente), dessa forma reduziremos a repeti√ß√£o de c√≥digos.</li><li><strong>Testes Unit√°rios</strong>: Para conseguirmos detectar falhas o mais cedo poss√≠vel no desenvolvimento</li><li><strong>Documenta√ß√£o</strong>: Tentaremos deixa o processo de documentar o mais suave poss√≠vel de forma que fique f√°cil para que outras pessoas da empresa consigam adotar os arquivos.</li></ul><p>Vamos come√ßar ent√£o explicando o motivo pela escolha desses pilares.</p><hr><h3 id=m√≥dulos>M√≥dulos</h3><p>Como muitos j√° devem saber, um m√≥dulo no Terraform √© uma forma de agregarmos recursos que s√£o configurado em conjunto com certa frequ√™ncia, dessa forma conseguimos reaproveitar c√≥digo com mais facilidade e fazer altera√ß√µes em massa. Algo importante a ser considerado √© que quando escrevendo m√≥dulos outras pessoas podem estar dependendo do seu c√≥digo, por isso √© importante levar em considera√ß√£o antes de realizar uma altera√ß√£o que possa levar a incompatibilidade, mas temos como contornar isso.</p><h3 id=testesunit√°rios>Testes Unit√°rios</h3><p>Testes em infraestrutura de certa forma ainda s√£o incomuns por conta do custo que isso pode gerar, por√©m se bem controlados podem facilitar bastante o desenvolvimento e manutenabilidade do seu c√≥digo, podemos ter nos testes os cen√°rios mais importantes aos quais os m√≥dulo deve cobrir, para evitar que uma altera√ß√£o nova quebre algo existente. Outra vantagem √© que tendo os cen√°rios documentado nos testes n√£o precisamos nos preocupar em realizarmos n√≥s mesmos, o que pode levar a erros.</p><h3 id=documenta√ß√£o>Documenta√ß√£o</h3><p>Por √∫ltimo temos a etapa da documenta√ß√£o, ter uma boa documenta√ß√£o facilita muito a compreens√£o e a ado√ß√£o por parte dos times, por√©m se feita manualmente √© muito f√°cil ter algum exemplo perdido, ou uma vari√°vel com valor errado em um readme, levando a falhas na hora que algu√©m tentar seguir a mesma. Por isso vamos tentar deixar o processo o mais autom√°tico poss√≠vel, de forma que a doc esteja sempre atualizada com os valores no seu projeto.</p><h3 id=ondequeremoschegar>Onde queremos chegar</h3><p>Por fim segue a estrutura de reposit√≥rio onde queremos chegar, observe que temos alguns arquivos <code>go</code> pois √© a linguagem que vamos utilizar para escrever os testes unit√°rios</p><pre><code class=bash>terraform-modules-structure
‚îú‚îÄ‚îÄ examples/
‚îú‚îÄ‚îÄ go.mod
‚îú‚îÄ‚îÄ go.sum
‚îú‚îÄ‚îÄ modules/
‚îú‚îÄ‚îÄ README.md
‚îî‚îÄ‚îÄ test/
</code></pre><hr><h2 id=escrevendooc√≥digo>Escrevendo o c√≥digo</h2><p>Antes de come√ßar vamos ent√£o definir dois tipos de servi√ßos para subirmos, primeiro vamos focar em uma Cloud Function no GCP, em uma cloud Function podemos escolher alguns tipos de fontes para buscar o nosso c√≥digo, para esse exemplo vamos buscar de um Bucket, ent√£o vamos ter a seguinte estrutura:</p><p>()()()()()()()</p><h3 id=inicializandooreposit√≥rio>Inicializando o Reposit√≥rio</h3><p>Essa parte come√ßa bem simples, a princ√≠pio s√≥ precisamos iniciar um projeto golang, o que pode ser feito da seguinte forma</p><pre><code class=bash>‚ùØ mkdir terraform-modules-structure &amp;&amp; cd terraform-modules-structure
‚ùØ go mod init terraform-modules-structure
</code></pre><p>Observe que nomeei meu projeto como <code>terraform-modules-structure</code>, mas fique livre pra nomear como quiser.</p><h3 id=testes>Testes</h3><p>Tentando seguir uma boa pr√°tica do mundo do desenvolvimento vamos come√ßar pelos testes unit√°rios. Para isso utilizaremos uma ferramenta chamada <a href=https://terratest.gruntwork.io/docs/getting-started/quick-start/>Terratest</a> desenvolvida pelo pessoal do Gruntwork. Essa biblioteca possui v√°rios m√≥dulos para lidar com diferentes backends (Google, AWS, Kubernetes, etc&#8230;), facilitando a ado√ß√£o em diferentes projetos.</p><p>Agora vamos escrever nosso primeiro teste, primeiro vamos criar uma pasta para nossos testes e ent√£o o arquivo do mesmo, lembrando que em um projeto <code>go</code> testes costumam ter uma nomenclatura <code>*_test.go</code>.</p><pre><code class=bash>‚ùØ mkdir -p test/gcp
‚ùØ touch test/gcp/cloud_function_test.go
</code></pre><p>Pensando agora no nosso servi√ßo vamos analisar os requisitos que temos. Gostar√≠amos que o terraform que escrevemos tenha um retorno com sucesso, e que sejam criados uma inst√¢ncia de Cloud Function e um bucket.</p><p>Um ponto importante ao executar testes s√£o o nome dos recursos e garantir que o mesmo seja destru√≠do ap√≥s a rotina. O primeiro ponto para evitar que o mesmo falhe somente por ter um nome repetiddo e o segundo para reduzir os gastos.</p><p>Como essas coisas s√£o gerais em testes, vamos aproveitar para criar o arquivo <code>test/helpers.go</code> que ter√° as fun√ß√µes auxiliares para que possam ser reaproveitadas em multiplos testes.</p><pre><code class=go>package test

import (
	&quot;math/rand&quot;
	&quot;testing&quot;
	&quot;time&quot;

	&quot;github.com/gruntwork-io/terratest/modules/terraform&quot;
)

// Teardown destr√≥i os recursos criados pelo terraform apply, caso ocorra um erro, ele tenta novamente ap√≥s 5 segundos
func Teardown(t *testing.T, terraformOptions *terraform.Options) {
	_, err := terraform.DestroyE(t, terraformOptions)
	for err != nil {
		time.Sleep(5 * time.Second)
		_, err = terraform.DestroyE(t, terraformOptions)
	}
}

// GenerateHash retorna uma string aleat√≥ria dado um tamanho.
func GenerateHash(size int) string {
	letterRunes := []rune(&quot;abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ&quot;)
	s := make([]rune, size)
	for i := range s {
		s[i] = letterRunes[rand.Intn(len(letterRunes))]
	}

	return string(s)
}
</code></pre><p>Agora o que precisamos fazer √© escrever o teste de fato, para isso crie o arquivo <code>test/gcp/cloud_fucntion_test.go</code> e preencha com o seguinte</p><pre><code class=go>package gcp_test

import (
	&quot;testing&quot;

	// Observe que aqui √© um import do meu projeto, o seu pode variar
	&quot;github.com/nivaldogmelo/terraform-modules-structure/test&quot;

	&quot;github.com/gruntwork-io/terratest/modules/gcp&quot;
	&quot;github.com/gruntwork-io/terratest/modules/terraform&quot;
	&quot;github.com/stretchr/testify/assert&quot;
)

func TestCloudFunction(t *testing.T) {
	// t.Parallel() is used to run the tests in parallel

	projectId := gcp.GetGoogleProjectIDFromEnvVar(t)

	testHash := test.GenerateHash(10)

	expectedFunctionName := &quot;test-function&quot; + testHash

	// Aqui definimos as configura√ß√µes do Terraform, como o diret√≥rio onde est√£o os arquivos de configura√ß√£o, vari√°veis e se o terratest deve realizar retry em caso de erro.
	terraformOptions := terraform.WithDefaultRetryableErrors(t, &amp;terraform.Options{
		TerraformDir: &quot;../../examples/gcp/cloud-function&quot;,

		VarFiles: []string{&quot;inputs/varfiles.tfvars&quot;},

		// Aqui definimos as vari√°veis que ser√£o passadas para o Terraform.
		Vars: map[string]interface{}{
			&quot;function_name&quot;: expectedFunctionName,
		},

		EnvVars: map[string]string{
			&quot;GOOGLE_CLOUD_PROJECT&quot;: projectId,
		},
	})

	// Com o defer n√≥s adiamos o uso do &quot;terraform destroy&quot; at√© o final do teste, assim garantimos que o ambiente ser√° destru√≠do mesmo que o teste falhe.
	defer test.Teardown(t, terraformOptions)

	// Aqui rodamos o comando &quot;terraform init&quot; e &quot;terraform apply&quot; para criar a infraestrutura.
	terraform.InitAndApply(t, terraformOptions)

	// Aqui verificamos se o bucket foi criado com sucesso.
	gcp.AssertStorageBucketExists(t, expectedFunctionName)
	// output := terraform.Output(t, terraformOptions, &quot;hello_world&quot;)
	// assert.Equal(t, &quot;Hello, World!&quot;, output)
}
</code></pre><p>Agora vamos executar os testes, para isso use</p><pre><code class=bash>‚ùØ go mod tidy
‚ùØ go test ./...
</code></pre><p>Observe que o mesmo vai falhar, pois n√£o configuramos nem o projeto nem os arquivos terraform. Agora vamos trabalhar nisso</p><h3 id=exemplos>Exemplos</h3><p>Eu diria que aqui √© a parte mais importante do projeto, nessa parte vamos definir os exemplos de uso do m√≥dulo, pensando em como os usu√°rios finais v√£o interagir com nossos m√≥dulos. Por isso √© importante que os exemplos sejam claros, entreguem algo pr√°tico e sejam est√°veis, pois caso contr√°rio a ado√ß√£o do projeto pode n√£o ser simples.</p><p>Vamos pensar novamente no nosso exemplo, por√©m do ponto de vista de quem vai consumir o m√≥dulo. Precisamos criar uma Cloud Function no projeto GCP. A partir disso pensamos em quais par√¢metros fazem sentido o usu√°rio ter controle e quais n√£o fazem tanta diferen√ßa.</p><p>Olhando o seguinte <a href=https://registry.terraform.io/providers/hashicorp/google/latest/docs/resources/cloudfunctions2_function#example-usage---cloudfunctions2-basic>exemplo</a> vamos come√ßar proponto que o usu√°rio possa ter controle nos seguintes pontos par√¢metros:</p><ul><li>nome da func√£o</li><li>regi√£o</li><li>descri√ß√£o</li><li>runtime</li><li>entry_point</li><li>max_instance</li><li>mem√≥ria</li><li>timeout</li></ul><p>O restante pode ser definido pelo pr√≥prio m√≥dulo, visto que n√£o afeta tanto na entrega final</p><p>Ent√£o vamos come√ßar a criar esses arquivos</p><pre><code class=bash>‚ùØ mkdir -p examples/gcp/cloud-function-v2
‚ùØ touch examples/gcp/cloud-function-v2/main.tf
</code></pre><p>No <code>main.tf</code> vamos preencher:</p><pre><code class=hcl>module &quot;function&quot; {
  source = &quot;../../modules/gcp/cloud-function-v2&quot;

  name        = &quot;my-function&quot;
  description = &quot;My function&quot;
  region      = &quot;us-central1&quot;

  runtime     = &quot;nodejs16&quot;
  entry_point = &quot;helloGET&quot;

  source_path = &quot;./src&quot;

  max_instances = 1
  memory        = 256
  timeout       = 60
}
</code></pre><p>Vamos criar uma fun√ß√£o para conseguir fazer deploy no mesmo, para isso vamos usar o exemplo na pr√≥pria doc do google, para encaixar o mesmo aqui basta usar</p><pre><code class=bash>‚ùØ mkdir examples/gcp/cloud-function-v2/src
‚ùØ touch examples/gcp/cloud-function-v2/src/index.js
‚ùØ touch examples/gcp/cloud-function-v2/src/package.json
</code></pre><p>e preencher com o seguinte no <code>index.js</code></p><pre><code class=javascript>const functions = require('@google-cloud/functions-framework');

// Register an HTTP function with the Functions Framework that will be executed
// when you make an HTTP request to the deployed function's endpoint.
functions.http('helloGET', (req, res) =&gt; {
  res.send('Hello World!');
});
</code></pre><p>e no <code>package.json</code></p><pre><code class=json>{
  &quot;name&quot;: &quot;nodejs-docs-samples-functions-hello-world-get&quot;,
  &quot;version&quot;: &quot;0.0.1&quot;,
  &quot;private&quot;: true,
  &quot;license&quot;: &quot;Apache-2.0&quot;,
  &quot;author&quot;: &quot;Google Inc.&quot;,
  &quot;repository&quot;: {
	&quot;type&quot;: &quot;git&quot;,
	&quot;url&quot;: &quot;https://github.com/GoogleCloudPlatform/nodejs-docs-samples.git&quot;
  },
  &quot;engines&quot;: {
	&quot;node&quot;: &quot;&gt;=16.0.0&quot;
  },
  &quot;scripts&quot;: {
	&quot;test&quot;: &quot;c8 mocha -p -j 2 test/*.test.js --timeout=6000 --exit&quot;
  },
  &quot;dependencies&quot;: {
	&quot;@google-cloud/functions-framework&quot;: &quot;^3.1.0&quot;
  },
  &quot;devDependencies&quot;: {
	&quot;c8&quot;: &quot;^8.0.0&quot;,
	&quot;gaxios&quot;: &quot;^6.0.0&quot;,
	&quot;mocha&quot;: &quot;^10.0.0&quot;,
	&quot;wait-port&quot;: &quot;^1.0.4&quot;
  }
}
</code></pre><p>Pronto! Agora temos um exemplo de uso, falta fazer o mesmo funcionar.</p><h3 id=modulos>Modulos</h3><p>Nessa parte √© onde vai estar toda a l√≥gica terraform por tr√°s desse projeto, √© esse o c√≥digo que vai ser reaproveitado pelos demais times. O motivo pelo qual come√ßamos pelos outros pontos e n√£o por ele √© que a ideia √© termos m√≥dulos que funcionem de acordo com os times que usem, e n√£o times que precisem se adequar para utilizar os m√≥dulos.</p><p>Vamos come√ßar criando a pasta e os arquivos b√°sicos pro m√≥dulo</p><pre><code class=bash>‚ùØ mkdir -p modules/gcp/cloud-function-v2
‚ùØ touch modules/gcp/cloud-function-v2/main.tf modules/gcp/cloud-function-v2/variables.tf
</code></pre><p>Agora vamos escrever a l√≥gica terraform, no <code>main.tf</code> escreva:</p><pre><code class=hcl>resource &quot;google_storage_bucket&quot; &quot;main&quot; {
  // Aqui definimos o bucket que armazenar√° o c√≥digo fonte da nossa fun√ß√£o
  name                        = &quot;${var.name}-gcf-source&quot;
  location                    = &quot;US&quot;
  uniform_bucket_level_access = true
}

data &quot;archive_file&quot; &quot;source&quot; {
  // Com esse recurso n√≥s zipamos o c√≥digo fonte da nossa fun√ß√£o para ser enviado ao bucket
  type        = &quot;zip&quot;
  source_dir  = var.source_path
  output_path = &quot;function-source.zip&quot;
}

resource &quot;google_storage_bucket_object&quot; &quot;main&quot; {
  // Aqui selecionamos o arquivo zipado e o enviamos para o bucket
  name         = data.archive_file.source.output_path
  bucket       = google_storage_bucket.main.name
  source       = data.archive_file.source.output_path
  content_type = &quot;application/zip&quot;

  // Dependemos do bucket e do arquivo para garantir que eles sejam criados antes da fun√ß√£o
  depends_on = [ data.archive_file.source, google_storage_bucket.main ]
}

resource &quot;google_cloudfunctions2_function&quot; &quot;main&quot; {
  name        = var.name
  location    = var.location
  description = var.description

  build_config {
	runtime     = var.runtime
	entry_point = var.entry_point
	source {
	  storage_source {
	bucket = google_storage_bucket.main.name
	object = google_storage_bucket_object.main.name
	  }
	}
  }

  service_config {
	max_instance_count = var.max_instances
	available_memory   = var.memory
	timeout_seconds    = var.timeout
  }

  // Esperamos o objeto do bucket para garantir que o c√≥digo fonte esteja dispon√≠vel
  depends_on = [ google_storage_bucket_object.main ]
}
</code></pre><p>E vamos definir as vari√°veis no <code>variables.tf</code></p><pre><code class=hcl>variable &quot;name&quot; {
  type        = string
  description = &quot;The name of the function&quot;
  nullable    = false
}

variable &quot;description&quot; {
  type        = string
  description = &quot;The description of the function&quot;
  default     = &quot;My function&quot;
}

variable &quot;region&quot; {
  type        = string
  description = &quot;The region where the function will be deployed&quot;
  default     = &quot;us-central1&quot;
}

variable &quot;runtime&quot; {
  type        = string
  description = &quot;The runtime of the function&quot;
  nullable    = false
}

variable &quot;entry_point&quot; {
  type        = string
  description = &quot;The entry point of the function&quot;
  nullable    = false
}

variable &quot;source_path&quot; {
  type        = string
  description = &quot;The path to the source code of the function&quot;
  default     = &quot;./src&quot;
}

variable &quot;max_instances&quot; {
  type        = number
  description = &quot;The maximum number of instances that the function can have&quot;
  default     = 1
}

variable &quot;memory&quot; {
  type        = number
  description = &quot;The amount of memory in MB that the function can use&quot;
  default     = 256
}

variable &quot;timeout&quot; {
  type        = number
  description = &quot;The timeout in seconds for the function&quot;
  default     = 60
}
</code></pre><h3 id=doc>Doc</h3><h2 id=conclus√£o>Conclus√£o</h2></body></html></div><footer></footer></article></section></div><footer class=footer><section class=container>¬©
2019 -
2024
Nivaldo Melo
¬∑
Promovido por <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a> & <a href=https://github.com/luizdepra/hugo-coder/ target=_blank rel=noopener>Coder</a>.</section></footer></main><script src=/js/coder.min.6ae284be93d2d19dad1f02b0039508d9aab3180a12a06dcc71b0b0ef7825a317.js integrity="sha256-auKEvpPS0Z2tHwKwA5UI2aqzGAoSoG3McbCw73gloxc="></script></body></html>